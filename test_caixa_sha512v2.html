<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaixaBank Test - SHA512 V2</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .form-group { margin: 15px 0; }
        button { background: #dc3545; color: white; padding: 15px 30px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #c82333; }
        .critical { background: #f8d7da; padding: 15px; border-left: 4px solid #dc3545; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ”¥ CaixaBank Test - HMAC_SHA512_V2 (AES-CBC)</h1>
        
        <div class="critical">
            <h3>ðŸŽ¯ TESTING SHA512 V2 VERSION:</h3>
            <ul>
                <li><strong>âœ… Signature Version:</strong> HMAC_SHA512_V2 (newer version)</li>
                <li><strong>âœ… Algorithm:</strong> AES-CBC + HMAC-SHA512 (not 3DES)</li>
                <li><strong>âœ… Order:</strong> 3218A512V2 (unique, compliant)</li>
                <li><strong>âœ… Amount:</strong> â‚¬599.99 (59999 cents)</li>
                <li><strong>âœ… Signature:</strong> RQW6qi0zXQU+UZgnmLcc2EmJI7nWE4rwB+MGblrUqmsXv+u21afT5IWgkAsPKYp6HClhGs+L/kp9fYdO/Yx3RA==</li>
            </ul>
        </div>

        <p><strong>ðŸ”¥ THIS TESTS THE NEWER SHA512 VERSION!</strong></p>
        <p>If your terminal is configured for HMAC_SHA512_V2, this should work!</p>

        <form action="https://sis-t.redsys.es:25443/sis/realizarPago" method="POST" id="caixaPaymentForm">
            <input type="hidden" name="Ds_SignatureVersion" value="HMAC_SHA512_V2">
            <input type="hidden" name="Ds_MerchantParameters" value="eyJEU19NRVJDSEFOVF9BTU9VTlQiOiI1OTk5OSIsIkRTX01FUkNIQU5UX09SREVSIjoiMzIxOEE1MTJWMiIsIkRTX01FUkNIQU5UX01FUkNIQU5UQ09ERSI6IjM2NzY5MTM1OSIsIkRTX01FUkNIQU5UX0NVUlJFTkNZIjoiOTc4IiwiRFNfTUVSQ0hBTlRfVFJBTlNBQ1RJT05UWVBFIjoiMCIsIkRTX01FUkNIQU5UX1RFUk1JTkFMIjoiMSIsIkRTX01FUkNIQU5UX01FUkNIQU5UVVJMIjoiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS92MS9wYXltZW50cy9jYWl4YS93ZWJob29rLyIsIkRTX01FUkNIQU5UX1VSTE9LIjoiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS92MS9wYXltZW50cy9jYWl4YS9zdWNjZXNzLyIsIkRTX01FUkNIQU5UX1VSTEtPIjoiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS92MS9wYXltZW50cy9jYWl4YS9lcnJvci8iLCJEU19NRVJDSEFOVF9QUk9EVUNUREVTQ1JJUFRJT04iOiJPbmxpbmUgUGF5bWVudCIsIkRTX01FUkNIQU5UX1RJVFVMQVIiOiJKb2huIERvZSJ9">
            <input type="hidden" name="Ds_Signature" value="RQW6qi0zXQU+UZgnmLcc2EmJI7nWE4rwB+MGblrUqmsXv+u21afT5IWgkAsPKYp6HClhGs+L/kp9fYdO/Yx3RA==">
            
            <div class="form-group">
                <button type="submit">ðŸ”¥ TEST SHA512 V2 - PAY â‚¬599.99</button>
            </div>
        </form>

        <h3>ðŸŽ¯ Comparison:</h3>
        <ul>
            <li><strong>SHA256 V1:</strong> 3DES-CBC + HMAC-SHA256</li>
            <li><strong>SHA512 V2:</strong> AES-CBC + HMAC-SHA512 (this test)</li>
        </ul>

        <p><strong>If this works, your terminal was configured for the newer SHA512 version!</strong></p>
        <p><strong>If this fails too, contact CaixaBank support with the questions ChatGPT-5 provided.</strong></p>
    </div>

    <script>
        console.log('ðŸ”¥ SHA512 V2 TEST');
        console.log('Order: 3218A512V2');
        console.log('Signature Version: HMAC_SHA512_V2');
        console.log('Algorithm: AES-CBC + HMAC-SHA512');
    </script>
</body>
</html>